#!/usr/bin/env ruby

require 'thor'
require 'these_damn_photos'

class TDPhotos < Thor

  option :storage
  desc 'scan PATH', 'scan PATH for new photos'
  def scan(path)
    TheseDamnPhotos::Collector.storage_root = options[:storage]
    scanner = TheseDamnPhotos::Scanner.new
    scanner.scan(path) do |file, collector|
      puts "\tadding #{file} to the collector"
      collector.save(file)
    end
  end
end

TDPhotos.start(ARGV)
